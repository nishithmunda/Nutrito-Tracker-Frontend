{"ast":null,"code":"var _jsxFileName = \"N:\\\\newclone\\\\Nutrito-Tracker\\\\frontend\\\\Nutrito-Tracker-Frontend\\\\src\\\\Login.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { Button, Segment, Form, Container } from 'semantic-ui-react';\nimport { Redirect } from 'react-router-dom';\nimport \"./App.css\";\nexport default class LogIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userName: {\n        value: \"\",\n        valid: false\n      },\n      password: {\n        value: \"\",\n        valid: false\n      }\n    };\n\n    this.changeHandler = event => {\n      this.setState({\n        [event.target.name]: {\n          value: event.target.value,\n          valid: !!event.target.value\n        }\n      });\n    };\n\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onChangeName = this.onChangeName.bind(this);\n    const token = localStorage.getItem(\"token\");\n    let loggedIn = true;\n\n    if (token == null) {\n      loggedIn = false;\n    }\n\n    this.state = {\n      userName: '',\n      password: '',\n      loggedIn\n    };\n  }\n\n  onChangeName(e) {\n    this.setState({\n      userName: e.target.value\n    });\n  }\n\n  onChangePassword(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  onChangeEmail(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const data = {\n      userName: this.state.userName,\n      password: this.state.password\n    };\n    console.log(data);\n\n    const encodeForm = data => {\n      return Object.keys(data).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(data[key])).join('&');\n    };\n\n    axios.post('http://localhost:8080/login', encodeForm(data), {\n      headers: {\n        'Accept': 'application/json'\n      }\n    }).then(function (response) {\n      console.log(response);\n\n      if (response.status === 200) {\n        localStorage.setItem(\"token\", \"qwewrrttyyuuiioppiassdfdgfhgjhk\"); //alert(\"Successfully Login\")\n\n        swal({\n          title: \"Successfully Login!\",\n          text: \"     \",\n          icon: \"success\",\n          timer: 2000,\n          button: false\n        }).then(function () {\n          window.location.href = \"/nutrito\";\n        });\n      } else {\n        // alert(\"Password incorrect\")\n        swal({\n          title: \"Incorrect username or password\",\n          text: \"     \",\n          icon: \"error\",\n          timer: 2000,\n          button: false\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n      swal({\n        title: \"Incorrect username or password\",\n        text: \"     \",\n        icon: \"error\",\n        timer: 2000,\n        button: false\n      });\n    });\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/nutrito\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(Container, {\n      text: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-out-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"ui medium header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, \"LogIn\")), /*#__PURE__*/React.createElement(Form, {\n      className: \"form\",\n      method: \"post\",\n      onSubmit: this.onSubmit,\n      action: \"http://localhost:4000/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      label: \"Username\",\n      icon: \"user\",\n      type: \"text\" //   error=\"wrong\"\n      //   success=\"right\"\n      ,\n      name: \"userName\" // pattern=\"[A-Za-z]{3,}\"\n      ,\n      title: \"Username cannot contain numbers and minimum of 3 characters\",\n      value: this.state.userName,\n      onChange: this.onChangeName,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      icon: \"lock\",\n      label: \"Password\",\n      type: \"password\",\n      validate: true,\n      name: \"password\",\n      value: this.state.password,\n      onChange: this.onChangePassword,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form_button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 20\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      color: \"black\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 20\n      }\n    }, \"Submit\"))))));\n  }\n\n}","map":{"version":3,"sources":["N:/newclone/Nutrito-Tracker/frontend/Nutrito-Tracker-Frontend/src/Login.jsx"],"names":["React","Component","axios","swal","Button","Segment","Form","Container","Redirect","LogIn","constructor","props","state","userName","value","valid","password","changeHandler","event","setState","target","name","onChangeEmail","bind","onChangePassword","onSubmit","onChangeName","token","localStorage","getItem","loggedIn","e","email","preventDefault","data","console","log","encodeForm","Object","keys","map","key","encodeURIComponent","join","post","headers","then","response","status","setItem","title","text","icon","timer","button","window","location","href","catch","error","render"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport axios from 'axios';\r\nimport swal from 'sweetalert';\r\nimport {Button,Segment,Form,Container } from 'semantic-ui-react'\r\nimport { Redirect } from 'react-router-dom';\r\nimport \"./App.css\";\r\n\r\n\r\n\r\nexport default class LogIn extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.onChangeEmail = this.onChangeEmail.bind(this);\r\n      this.onChangePassword = this.onChangePassword.bind(this);\r\n      this.onSubmit = this.onSubmit.bind(this);\r\n      this.onChangeName = this.onChangeName.bind(this);\r\n\r\n        const token=localStorage.getItem(\"token\")\r\n        let loggedIn=true\r\n        if(token==null)\r\n        {\r\n            loggedIn=false\r\n        }\r\n\r\n      this.state = {\r\n         userName: '',\r\n         password: '',\r\n         loggedIn\r\n      }\r\n    }\r\n    state = {\r\n      userName: {\r\n        value: \"\",\r\n        valid: false\r\n      },\r\n      password: {\r\n        value: \"\",\r\n        valid: false\r\n      }\r\n      };\r\n\r\n\r\n      changeHandler = event => {\r\n        this.setState({ [event.target.name]: { value: event.target.value, valid: !!event.target.value } });\r\n      };\r\n\r\n      onChangeName(e) {\r\n        this.setState({\r\n          userName: e.target.value\r\n        })\r\n      }\r\n\r\n\r\n\r\n\r\n    onChangePassword(e) {\r\n        this.setState({\r\n          password: e.target.value\r\n        })\r\n      }\r\n\r\n    onChangeEmail(e) {\r\n      this.setState({\r\n        email: e.target.value\r\n      })\r\n    }\r\n\r\n    onSubmit(e) {\r\n      e.preventDefault();\r\n\r\n      const data = {\r\n        userName: this.state.userName,\r\n        password: this.state.password,\r\n      }\r\n\r\n      console.log(data);\r\n\r\n      const encodeForm = (data) => {\r\n        return Object.keys(data)\r\n            .map(key => encodeURIComponent(key) + '=' + encodeURIComponent(data[key]))\r\n            .join('&');\r\n      }\r\n\r\n      axios.post('http://localhost:8080/login', encodeForm(data), {headers: {'Accept': 'application/json'}})\r\n      .then(function (response) {\r\n                   console.log(response);\r\n                   if (response.status === 200)\r\n                   {\r\n\r\n                     localStorage.setItem(\"token\",\"qwewrrttyyuuiioppiassdfdgfhgjhk\")\r\n                   //alert(\"Successfully Login\")\r\n                   swal({\r\n                     title: \"Successfully Login!\",\r\n                     text: \"     \",\r\n                     icon: \"success\",\r\n                     timer: 2000,\r\n                     button: false\r\n                   })\r\n                   .then(function(){\r\n                    window.location.href = \"/nutrito\"\r\n                   })\r\n                   }\r\n                   else\r\n                   {\r\n                     // alert(\"Password incorrect\")\r\n                     swal({\r\n                       title: \"Incorrect username or password\",\r\n                       text: \"     \",\r\n                       icon: \"error\",\r\n                       timer: 2000,\r\n                       button: false\r\n                     })\r\n                   }\r\n\r\n               })\r\n               .catch(function (error) {\r\n                   console.log(error);\r\n                   swal({\r\n                     title: \"Incorrect username or password\",\r\n                     text: \"     \",\r\n                     icon: \"error\",\r\n                     timer: 2000,\r\n                     button: false\r\n                   })\r\n           });\r\n\r\n\r\n    }\r\n\r\n    render()\r\n    {\r\n      if(this.state.loggedIn){\r\n         return <Redirect to=\"/nutrito\"/>\r\n      }\r\n        return(\r\n           <Container text>\r\n            <div class=\"form-out-box\">\r\n              <Segment>\r\n                <div class=\"title\">\r\n                <div class=\"ui medium header\">LogIn</div>\r\n                </div>\r\n              <Form className=\"form\" method=\"post\" onSubmit={this.onSubmit} action=\"http://localhost:4000/login\">\r\n\r\n\r\n              <div class = \"field\">\r\n                <Form.Input\r\n                    label=\"Username\"\r\n                    icon=\"user\"\r\n                    type=\"text\"\r\n                  //   error=\"wrong\"\r\n                  //   success=\"right\"\r\n                    name=\"userName\"\r\n                   // pattern=\"[A-Za-z]{3,}\"\r\n                    title=\"Username cannot contain numbers and minimum of 3 characters\"\r\n                    value={this.state.userName}\r\n                    onChange={this.onChangeName}\r\n                    required\r\n                  />\r\n                  </div>\r\n\r\n\r\n\r\n                  <div class = \"field\">\r\n                  <Form.Input\r\n\r\n                                       icon=\"lock\"\r\n                                       label='Password'\r\n                                       type=\"password\"\r\n                                       validate\r\n                                       name=\"password\"\r\n\r\n                                       value={this.state.password}\r\n                                       onChange={this.onChangePassword}\r\n                                       required\r\n                  />\r\n                  </div>\r\n\r\n\r\n\r\n                   <div className=\"form_button\">\r\n                   <Button type='submit' color='black'>Submit</Button>\r\n                   </div>\r\n\r\n              </Form>\r\n            </Segment>\r\n       </div>\r\n    </Container>\r\n    );\r\n    }\r\n      }\r\n"]},"metadata":{},"sourceType":"module"}